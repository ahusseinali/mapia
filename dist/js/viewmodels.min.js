var app=app||{};app.viewModels=app.viewModels||{},app.mapObjects=app.mapObjects||{},function(){"use strict";ko.bindingHandlers.googlemap={init:function(e,a){var p=a().map,o={zoom:p.zoom(),center:p.center(),styles:p.styles(),mapTypeControl:!1};app.mapObjects.map=new google.maps.Map(e,o),app.mapObjects.infowindow=new google.maps.InfoWindow({content:""}),app.mapObjects.markers=[];var n=p.places;n.loadGooglePlaces(p.center())},update:function(e,a){var p=a().map,o=a().info,n=p.places;app.mapObjects.markers.forEach(function(e){e.setMap(null)}),app.mapObjects.markers=[],app.mapObjects.infoboxName=o,n.selectedPlaces().forEach(function(e){var a=new google.maps.Marker({position:e.latLng,map:app.mapObjects.map});a.setIcon("img/"+e.types[0]+".png"),google.maps.event.clearListeners(a,"click"),a.addListener("click",function(){p.closeSideNav(),n.loadYelpDetails(e),n.currentPlace(e);var o=$('<div style="display: none" data-bind="template: { name: \''+app.mapObjects.infoboxName+"'}\"></div>").appendTo("body");console.log(e),ko.applyBindings(e,o[0]);var t=o.html();ko.cleanNode(o[0]),o.remove(),app.mapObjects.infowindow.setContent(t),app.mapObjects.infowindow.open(app.mapObjects.map,a)}),app.mapObjects.markers.push(a)})}};var e=function(e){this.mapModel=ko.observable(e)};e.prototype.selectPlace=function(e){new google.maps.event.trigger(app.mapObjects.markers[e],"click")},app.viewModels.mapVM=new e(app.models.mapModel)}();